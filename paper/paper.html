<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.543">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Yan B. Mezhiborsky">
<meta name="dcterms.date" content="2024-12-03">

<title>Finding the True MVP</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="paper_files/libs/clipboard/clipboard.min.js"></script>
<script src="paper_files/libs/quarto-html/quarto.js"></script>
<script src="paper_files/libs/quarto-html/popper.min.js"></script>
<script src="paper_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="paper_files/libs/quarto-html/anchor.min.js"></script>
<link href="paper_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="paper_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="paper_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="paper_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="paper_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="paper_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="paper_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-intro" id="toc-sec-intro" class="nav-link active" data-scroll-target="#sec-intro"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#sec-data" id="toc-sec-data" class="nav-link" data-scroll-target="#sec-data"><span class="header-section-number">2</span> Data</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview"><span class="header-section-number">2.1</span> Overview</a></li>
  <li><a href="#sec-variables" id="toc-sec-variables" class="nav-link" data-scroll-target="#sec-variables"><span class="header-section-number">2.2</span> Variables</a>
  <ul class="collapse">
  <li><a href="#all-nba-variables" id="toc-all-nba-variables" class="nav-link" data-scroll-target="#all-nba-variables"><span class="header-section-number">2.2.1</span> All NBA Variables</a></li>
  <li><a href="#historical-mvp-variable" id="toc-historical-mvp-variable" class="nav-link" data-scroll-target="#historical-mvp-variable"><span class="header-section-number">2.2.2</span> Historical MVP Variable</a></li>
  </ul></li>
  <li><a href="#measurement" id="toc-measurement" class="nav-link" data-scroll-target="#measurement"><span class="header-section-number">2.3</span> Measurement</a></li>
  <li><a href="#outcome-variable-mvp-index" id="toc-outcome-variable-mvp-index" class="nav-link" data-scroll-target="#outcome-variable-mvp-index"><span class="header-section-number">2.4</span> Outcome variable: MVP Index</a></li>
  </ul></li>
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model"><span class="header-section-number">3</span> Model</a>
  <ul class="collapse">
  <li><a href="#model-set-up" id="toc-model-set-up" class="nav-link" data-scroll-target="#model-set-up"><span class="header-section-number">3.1</span> Model set-up</a>
  <ul class="collapse">
  <li><a href="#model-justification" id="toc-model-justification" class="nav-link" data-scroll-target="#model-justification"><span class="header-section-number">3.1.1</span> Model justification</a></li>
  <li><a href="#model-results" id="toc-model-results" class="nav-link" data-scroll-target="#model-results"><span class="header-section-number">3.1.2</span> Model Results</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="header-section-number">4</span> Results</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion"><span class="header-section-number">5</span> Discussion</a>
  <ul class="collapse">
  <li><a href="#sec-first-point" id="toc-sec-first-point" class="nav-link" data-scroll-target="#sec-first-point"><span class="header-section-number">5.1</span> First discussion point</a></li>
  <li><a href="#second-discussion-point" id="toc-second-discussion-point" class="nav-link" data-scroll-target="#second-discussion-point"><span class="header-section-number">5.2</span> Second discussion point</a></li>
  <li><a href="#third-discussion-point" id="toc-third-discussion-point" class="nav-link" data-scroll-target="#third-discussion-point"><span class="header-section-number">5.3</span> Third discussion point</a></li>
  <li><a href="#weaknesses-and-next-steps" id="toc-weaknesses-and-next-steps" class="nav-link" data-scroll-target="#weaknesses-and-next-steps"><span class="header-section-number">5.4</span> Weaknesses and next steps</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a></li>
  <li><a href="#additional-data-details" id="toc-additional-data-details" class="nav-link" data-scroll-target="#additional-data-details"><span class="header-section-number">6</span> Additional data details</a></li>
  <li><a href="#sec-model-details" id="toc-sec-model-details" class="nav-link" data-scroll-target="#sec-model-details"><span class="header-section-number">7</span> Model details</a>
  <ul class="collapse">
  <li><a href="#posterior-predictive-check" id="toc-posterior-predictive-check" class="nav-link" data-scroll-target="#posterior-predictive-check"><span class="header-section-number">7.1</span> Posterior predictive check</a></li>
  <li><a href="#diagnostics" id="toc-diagnostics" class="nav-link" data-scroll-target="#diagnostics"><span class="header-section-number">7.2</span> Diagnostics</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">8</span> References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Finding the True MVP</h1>
<p class="subtitle lead">An NBA Analysis Through Linear Regression</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Yan B. Mezhiborsky </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 3, 2024</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    First sentence. Second sentence. Third sentence. Fourth sentence.
  </div>
</div>


</header>


<section id="sec-intro" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Overview paragraph</p>
<p>Estimand paragraph</p>
<p>Results paragraph</p>
<p>Why it matters paragraph</p>
<p>Telegraphing paragraph: The remainder of this paper is structured as follows. <a href="#sec-data" class="quarto-xref">Section&nbsp;2</a>….</p>
</section>
<section id="sec-data" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data</h1>
<section id="overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>We use the statistical programming language R <span class="citation" data-cites="citeR">(<a href="#ref-citeR" role="doc-biblioref">R Core Team 2023</a>)</span>, as well as the following packages to help clean and manipulate our data, <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham et al. 2023</a>)</span>, <span class="citation" data-cites="rstanarm">(<a href="#ref-rstanarm" role="doc-biblioref">Goodrich et al. 2022</a>)</span>, <span class="citation" data-cites="dplyr">(<a href="#ref-dplyr" role="doc-biblioref">Wickham, François, et al. 2023</a>)</span>, <span class="citation" data-cites="janitor">(<a href="#ref-janitor" role="doc-biblioref">Firke 2023</a>)</span>, <span class="citation" data-cites="lubridate">(<a href="#ref-lubridate" role="doc-biblioref">Grolemund and Wickham 2023</a>)</span>, <span class="citation" data-cites="modelsummary">(<a href="#ref-modelsummary" role="doc-biblioref">Arel-Bundock 2023</a>)</span>, <span class="citation" data-cites="knitr">(<a href="#ref-knitr" role="doc-biblioref">Xie 2023</a>)</span>, <span class="citation" data-cites="StanHeaders">(<a href="#ref-StanHeaders" role="doc-biblioref">Carpenter et al. 2023</a>)</span>, <span class="citation" data-cites="kableExtra">(<a href="#ref-kableExtra" role="doc-biblioref">Zhu 2023</a>)</span>. Using these packages we cleaned our data, added years for the data sets that only had seasons, referring to the basketball season, as well as helped create some nice tables, unlike the traditional R software can create.</p>
<p>Our data was collected from <span class="citation" data-cites="bbref">(<a href="#ref-bbref" role="doc-biblioref">Sports Reference LLC 2024</a>)</span>, we collected data from every player that received a vote for any All-NBA teams since 1986, this includes a vote cast for the First All-NBA Team, the Second All-NBA Team, and the Third All-NBA Team. As we believed that taking the players that received votes for the MVP awards would result in a smaller sample. We also created a new statistic call <code>MVP_Index</code> that will be defined in <a href="#sec-variables" class="quarto-xref">Section&nbsp;2.2</a>. In addition, we collected a data set for all NBA MVPs since 1986, so we could compare to the ones we have chosen with the <code>MVP_Index</code>.</p>
<p>Following <span class="citation" data-cites="tellingstories">Alexander (<a href="#ref-tellingstories" role="doc-biblioref">2023</a>)</span>, we use techniques and methods from this text we have analyzed the data using models, graphs, tables and other methods of data analysis to conduct our research to find players that could have been MVPs and what the MVP for the following years will look like(statistically).</p>
</section>
<section id="sec-variables" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-variables"><span class="header-section-number">2.2</span> Variables</h2>
<section id="all-nba-variables" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="all-nba-variables"><span class="header-section-number">2.2.1</span> All NBA Variables</h3>
<p>As we collected data from each year since 1986 individually, we have utilized the following variables:</p>
<ul>
<li><code>Team:</code> Whether the player was in the 1st, 2nd, or 3rd All NBA Teams or OVR if they did not make the top three teams but still received a vote.</li>
<li><code>Pos:</code> The player’s position including the generalized positions G, F, C, for Guard, Forward, and Center respectively.</li>
<li><code>Player:</code> The name of the NBA player.</li>
<li><code>Age:</code> The age of the NBA player.</li>
<li><code>Tm:</code> The three letter designation for the NBA team the player played for the year.</li>
<li><code>G:</code> Games played by the player.</li>
<li><code>MP:</code> Minutes played per game.</li>
<li><code>PTS:</code> Points per game.</li>
<li><code>TRB:</code> Total Rebounds per game, including offensive and defensive rebounds.</li>
<li><code>BLK:</code> Blocks per game</li>
<li><code>STL:</code> Steals Per game</li>
<li><code>WS:</code> The amount of wins allocated to the individual player</li>
</ul>
<p>As each year has an individual data set we took PTS, TRB, AST, BLK, STL,a nd WS took the average for that year and normalized each player’s statistics by dividing them by the average of that year with this we have created the MVP Index which we have defined as:</p>
<p>$$</p>
<p>MVP_{Index} = 0.8PTS_{Norm} + 0.25AST_{Norm} + 0.25TRB_{Norm} + 0.1STL_{Norm} + 0.1BLK_{Norm} + 0.15WS_{Norm}</p>
<p>$$</p>
<p>With this <code>MVP Index</code> we have created our own list of who could have been MVP base on statistics for that year, essentially comparing how good the player was to othe rplayers in the basketball season.</p>
</section>
<section id="historical-mvp-variable" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="historical-mvp-variable"><span class="header-section-number">2.2.2</span> Historical MVP Variable</h3>
<p>For our second set of date we have all MVPs since 1986 also sourced from <span class="citation" data-cites="bbref">(<a href="#ref-bbref" role="doc-biblioref">Sports Reference LLC 2024</a>)</span>, and the variables that have been used are the following:</p>
<ul>
<li><code>Player:</code> The name of the NBA player.</li>
<li><code>Year:</code> The year in which the player was selected as MVP.</li>
<li><code>Tm:</code> The three letter designation for the NBA team the player played for the year.</li>
<li><code>G:</code> Games played by the player.</li>
<li><code>MP:</code> Minutes played per game.</li>
<li><code>PTS:</code> Points per game.</li>
<li><code>TRB:</code> Total Rebounds per game, including offensive and defensive rebounds.</li>
<li><code>BLK:</code> Blocks per game</li>
<li><code>STL:</code> Steals Per game</li>
<li><code>WS:</code> The amount of wins allocated to the individual player</li>
</ul>
</section>
</section>
<section id="measurement" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="measurement"><span class="header-section-number">2.3</span> Measurement</h2>
<p>Data collected in sports and more specifically basketball is rather simple. When an NBA game is being played there are people who’s entire job is to keep track of a players statistics throughout the game, whenever a player makes a shot, or steals they ball it is being logged by that specific person. After the standard 82 games, there could be morte or less under different circumstances such ast COVID-19, injuries, or even trades all regular season statistics have been collected. As most of our in game statistics are based on the players ‘per game’ average, the total number of points blocks, etc., are recorded it is divided by the number of games the player played that season.</p>
</section>
<section id="outcome-variable-mvp-index" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="outcome-variable-mvp-index"><span class="header-section-number">2.4</span> Outcome variable: MVP Index</h2>
<p>Our outcome variable is the same as our estimand in <a href="#sec-intro" class="quarto-xref">Section&nbsp;1</a>. As <code>MVP Index</code> is dependent on our other statistics, Points, Assists, Rebounds, Steals, Blocks, and Win Shares. As we are studying MVPs in our paper this is our Variable of interest ast it represents how good a player was in comparison to the other best players in the NBA that year, from the sample of players that have received any ALL NBA Team vote.</p>
</section>
</section>
<section id="model" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Model</h1>
<p>The goal of our modelling strategy is twofold. Firstly, we will be using a linear regression model to predict the MVP Index of the mvp in the following year regardless of the player. This will tell us how much better we can expect the 2025 MVP to be compared to his fellow NBA players. Secondly, We will use another data set we have created by selecting players that had the highest MVP index in their respective year whether they had won MVP or not. So, Using both these predictions we will be able to compare whether we believe the player with the highest MVP index will in fact be the next NBA MVP.</p>
<p>Here we briefly describe the Linear analysis model used to investigate what the MVP Index of the next NBA MVP will be. For our model we will use collected data describe in <a href="#sec-data" class="quarto-xref">Section&nbsp;2</a>.</p>
<p>Background details and diagnostics are included in <a href="#sec-model-details" class="quarto-xref">Appendix&nbsp;7</a>.</p>
<section id="model-set-up" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="model-set-up"><span class="header-section-number">3.1</span> Model set-up</h2>
<p>Define <span class="math inline">\(y_i\)</span> as the number of seconds that the plane remained aloft. Then <span class="math inline">\(\beta_i\)</span> is the wing width and <span class="math inline">\(\gamma_i\)</span> is the wing length, both measured in millimeters.</p>
<span class="math display">\[\begin{align}
y_i|\mu_i, \sigma &amp;\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &amp;= \pi_i + \alpha_i + \rho_i + \beta_i + \xi_i + \omega_i \\
\mu &amp;\sim \mbox{Normal}(0, 2.5) \\
\pi &amp;\sim \mbox{Normal}(0, 2.5) \\
\alpha &amp;\sim \mbox{Normal}(0, 2.5) \\
\rho &amp;\sim \mbox{Normal}(0, 2.5) \\
\beta &amp;\sim \mbox{Normal}(0, 2.5) \\
\xi &amp;\sim \mbox{Normal}(0, 2.5) \\
\omega &amp;\sim \mbox{Normal}(0, 2.5) \\
\sigma &amp;\sim \mbox{Exponential}(1)
\end{align}\]</span>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a linear regression model</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>lm_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MVP_index <span class="sc">~</span> PTS <span class="sc">+</span> AST <span class="sc">+</span> TRB <span class="sc">+</span> BLK <span class="sc">+</span> STL <span class="sc">+</span> WS, <span class="at">data =</span> nba_master)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the summary of the model</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MVP_index ~ PTS + AST + TRB + BLK + STL + WS, data = nba_master)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.27967 -0.06232 -0.00013  0.06198  0.33044 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 0.1545172  0.0136329   11.33   &lt;2e-16 ***
PTS         0.0337247  0.0005182   65.08   &lt;2e-16 ***
AST         0.0445034  0.0012761   34.88   &lt;2e-16 ***
TRB         0.0295472  0.0010966   26.95   &lt;2e-16 ***
BLK         0.1125198  0.0041166   27.33   &lt;2e-16 ***
STL         0.1060966  0.0056427   18.80   &lt;2e-16 ***
WS          0.0199776  0.0009258   21.58   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.09672 on 1536 degrees of freedom
Multiple R-squared:  0.8992,    Adjusted R-squared:  0.8988 
F-statistic:  2284 on 6 and 1536 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>next_year_mvp_stats <span class="ot">&lt;-</span> mvp_table <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2024</span>) <span class="sc">%&gt;%</span>  <span class="co"># Replace with the target year</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PTS, AST, TRB, BLK, STL, WS)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict MVP_index for the next year's MVP</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>predicted_index_mvp_table <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_model, <span class="at">newdata =</span> next_year_mvp_stats)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Predicted MVP Index (mvp_table):"</span>, predicted_index_mvp_table))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Predicted MVP Index (mvp_table): 2.45027833674002"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>next_year_real_mvp_stats <span class="ot">&lt;-</span> merged_real_mvp <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2024</span>) <span class="sc">%&gt;%</span>  <span class="co"># Replace with the target year</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PTS, AST, TRB, BLK, STL, WS)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict MVP_index for the next year's MVP</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>predicted_index_real_mvp <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_model, <span class="at">newdata =</span> next_year_real_mvp_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="model-justification" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="model-justification"><span class="header-section-number">3.1.1</span> Model justification</h3>
<p>We expect a positive relationship between the size of the wings and time spent aloft. In particular…</p>
<p>We can use maths by including latex between dollar signs, for instance <span class="math inline">\(\theta\)</span>.</p>
</section>
<section id="model-results" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="model-results"><span class="header-section-number">3.1.2</span> Model Results</h3>
<div class="cell">
<div id="fig-modeltable" class="cell-output-display quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-modeltable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table table-striped table-hover table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Simulated Data
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Historical Data
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Year
</th>
<th style="text-align:left;">
Simulated Data - Player
</th>
<th style="text-align:right;">
Simulated Data - MVP Index
</th>
<th style="text-align:left;">
Historical Data - Player
</th>
<th style="text-align:right;">
Historical Data - MVP Index
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2014
</td>
<td style="text-align:left;">
Kevin Durant
</td>
<td style="text-align:right;">
2.405868
</td>
<td style="text-align:left;">
Kevin Durant
</td>
<td style="text-align:right;">
2.405868
</td>
</tr>
<tr>
<td style="text-align:right;">
2015
</td>
<td style="text-align:left;">
Russell Westbrook
</td>
<td style="text-align:right;">
2.398289
</td>
<td style="text-align:left;">
Stephen Curry
</td>
<td style="text-align:right;">
2.128396
</td>
</tr>
<tr>
<td style="text-align:right;">
2016
</td>
<td style="text-align:left;">
Stephen Curry
</td>
<td style="text-align:right;">
2.278181
</td>
<td style="text-align:left;">
Stephen Curry
</td>
<td style="text-align:right;">
2.278181
</td>
</tr>
<tr>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
Russell Westbrook
</td>
<td style="text-align:right;">
2.362328
</td>
<td style="text-align:left;">
Russell Westbrook
</td>
<td style="text-align:right;">
2.362328
</td>
</tr>
<tr>
<td style="text-align:right;">
2018
</td>
<td style="text-align:left;">
James Harden
</td>
<td style="text-align:right;">
2.297349
</td>
<td style="text-align:left;">
James Harden
</td>
<td style="text-align:right;">
2.297349
</td>
</tr>
<tr>
<td style="text-align:right;">
2019
</td>
<td style="text-align:left;">
James Harden
</td>
<td style="text-align:right;">
2.456584
</td>
<td style="text-align:left;">
Giannis Antetokounmpo
</td>
<td style="text-align:right;">
2.292537
</td>
</tr>
<tr>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
James Harden
</td>
<td style="text-align:right;">
2.263751
</td>
<td style="text-align:left;">
Giannis Antetokounmpo
</td>
<td style="text-align:right;">
2.154718
</td>
</tr>
<tr>
<td style="text-align:right;">
2021
</td>
<td style="text-align:left;">
Nikola Jokić
</td>
<td style="text-align:right;">
2.119867
</td>
<td style="text-align:left;">
Nikola Jokić
</td>
<td style="text-align:right;">
2.119867
</td>
</tr>
<tr>
<td style="text-align:right;">
2022
</td>
<td style="text-align:left;">
Nikola Jokić
</td>
<td style="text-align:right;">
2.260379
</td>
<td style="text-align:left;">
Nikola Jokić
</td>
<td style="text-align:right;">
2.260379
</td>
</tr>
<tr>
<td style="text-align:right;">
2023
</td>
<td style="text-align:left;">
Joel Embiid
</td>
<td style="text-align:right;">
2.156639
</td>
<td style="text-align:left;">
Joel Embiid
</td>
<td style="text-align:right;">
2.156639
</td>
</tr>
<tr>
<td style="text-align:right;">
2024
</td>
<td style="text-align:left;">
Luka Dončić
</td>
<td style="text-align:right;">
2.200904
</td>
<td style="text-align:left;">
Nikola Jokić
</td>
<td style="text-align:right;">
2.157337
</td>
</tr>
<tr>
<td style="text-align:right;">
2025
</td>
<td style="text-align:left;">
Predicted MVP
</td>
<td style="text-align:right;">
2.450278
</td>
<td style="text-align:left;">
Predicted MVP
</td>
<td style="text-align:right;">
2.401187
</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-modeltable-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Historical MVP and Player with highest MVP Index since 2014
</figcaption>
</figure>
</div>
</div>
</section>
</section>
</section>
<section id="results" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Results</h1>
<p>Our results are summarized in <strong>?@tbl-modelresults</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mvpindex" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mvpindex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="paper_files/figure-html/fig-mvpindex-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mvpindex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: MVP index of of Historical and simulated MVPs
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-pts" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="paper_files/figure-html/fig-pts-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: MVP PPG over Time
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-reb" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-reb-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="paper_files/figure-html/fig-reb-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-reb-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: MVP RPG over Time
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-ast" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ast-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="paper_files/figure-html/fig-ast-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ast-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: MVP ASG over Time
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="discussion" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Discussion</h1>
<section id="sec-first-point" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="sec-first-point"><span class="header-section-number">5.1</span> First discussion point</h2>
<p>If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.</p>
</section>
<section id="second-discussion-point" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="second-discussion-point"><span class="header-section-number">5.2</span> Second discussion point</h2>
<p>Please don’t use these as sub-heading labels - change them to be what your point actually is.</p>
</section>
<section id="third-discussion-point" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="third-discussion-point"><span class="header-section-number">5.3</span> Third discussion point</h2>
</section>
<section id="weaknesses-and-next-steps" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="weaknesses-and-next-steps"><span class="header-section-number">5.4</span> Weaknesses and next steps</h2>
<p>Weaknesses and next steps should also be included.</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="appendix" class="level1 unnumbered">
<h1 class="unnumbered">Appendix</h1>
</section>
<section id="additional-data-details" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Additional data details</h1>
</section>
<section id="sec-model-details" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Model details</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the summary of the model</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>lm_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(lm_model)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract coefficients as a data frame</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>coef_table <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(lm_summary<span class="sc">$</span>coefficients)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(coef_table) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Estimate"</span>, <span class="st">"Std. Error"</span>, <span class="st">"t value"</span>, <span class="st">"Pr(&gt;|t|)"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the kable table</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(coef_table, <span class="at">caption =</span> <span class="st">"Linear Regression Model Coefficients"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>), <span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Linear Regression Model Coefficients</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Std. Error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">t value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Pr(&gt;&amp;#124;t&amp;#124;)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">0.1545172</td>
<td style="text-align: right;">0.0136329</td>
<td style="text-align: right;">11.33411</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">PTS</td>
<td style="text-align: right;">0.0337247</td>
<td style="text-align: right;">0.0005182</td>
<td style="text-align: right;">65.07668</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AST</td>
<td style="text-align: right;">0.0445034</td>
<td style="text-align: right;">0.0012761</td>
<td style="text-align: right;">34.87554</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">TRB</td>
<td style="text-align: right;">0.0295472</td>
<td style="text-align: right;">0.0010966</td>
<td style="text-align: right;">26.94457</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BLK</td>
<td style="text-align: right;">0.1125198</td>
<td style="text-align: right;">0.0041166</td>
<td style="text-align: right;">27.33331</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">STL</td>
<td style="text-align: right;">0.1060966</td>
<td style="text-align: right;">0.0056427</td>
<td style="text-align: right;">18.80253</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WS</td>
<td style="text-align: right;">0.0199776</td>
<td style="text-align: right;">0.0009258</td>
<td style="text-align: right;">21.57788</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lm_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MVP_index ~ PTS + AST + TRB + BLK + STL + WS, data = nba_master)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.27967 -0.06232 -0.00013  0.06198  0.33044 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 0.1545172  0.0136329   11.33   &lt;2e-16 ***
PTS         0.0337247  0.0005182   65.08   &lt;2e-16 ***
AST         0.0445034  0.0012761   34.88   &lt;2e-16 ***
TRB         0.0295472  0.0010966   26.95   &lt;2e-16 ***
BLK         0.1125198  0.0041166   27.33   &lt;2e-16 ***
STL         0.1060966  0.0056427   18.80   &lt;2e-16 ***
WS          0.0199776  0.0009258   21.58   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.09672 on 1536 degrees of freedom
Multiple R-squared:  0.8992,    Adjusted R-squared:  0.8988 
F-statistic:  2284 on 6 and 1536 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<section id="posterior-predictive-check" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="posterior-predictive-check"><span class="header-section-number">7.1</span> Posterior predictive check</h2>
</section>
<section id="diagnostics" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="diagnostics"><span class="header-section-number">7.2</span> Diagnostics</h2>
<div id="fig-stanareyouokay" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stanareyouokay-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p>Checking the convergence of the MCMC algorithm</p>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-stanareyouokay-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6
</figcaption>
</figure>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="references" class="level1 unnumbered" data-number="8">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">8 References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-tellingstories" class="csl-entry" role="listitem">
Alexander, Rohan. 2023. <em>Telling Stories with Data</em>. Chapman; Hall/CRC. <a href="https://tellingstorieswithdata.com/">https://tellingstorieswithdata.com/</a>.
</div>
<div id="ref-modelsummary" class="csl-entry" role="listitem">
Arel-Bundock, Vincent. 2023. <em>Modelsummary: Beautiful and Customizable Model Summaries and Tables</em>. <a href="https://CRAN.R-project.org/package=modelsummary">https://CRAN.R-project.org/package=modelsummary</a>.
</div>
<div id="ref-StanHeaders" class="csl-entry" role="listitem">
Carpenter, Bob, Marco Inacio, Mitzi Morris, et al. 2023. <em>StanHeaders: C++ Header Files for Stan</em>. <a href="https://CRAN.R-project.org/package=StanHeaders">https://CRAN.R-project.org/package=StanHeaders</a>.
</div>
<div id="ref-janitor" class="csl-entry" role="listitem">
Firke, Sam. 2023. <em>Janitor: Simple Tools for Examining and Cleaning Dirty Data</em>. <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>.
</div>
<div id="ref-rstanarm" class="csl-entry" role="listitem">
Goodrich, Ben, Jonah Gabry, Imad Ali, and Sam Brilleman. 2022. <span>“<span class="nocase">rstanarm: <span>Bayesian</span> applied regression modeling via <span>Stan</span></span>.”</span> <a href="https://mc-stan.org/rstanarm/">https://mc-stan.org/rstanarm/</a>.
</div>
<div id="ref-lubridate" class="csl-entry" role="listitem">
Grolemund, Garrett, and Hadley Wickham. 2023. <em>Lubridate: Make Dealing with Dates a Little Easier</em>. <a href="https://CRAN.R-project.org/package=lubridate">https://CRAN.R-project.org/package=lubridate</a>.
</div>
<div id="ref-citeR" class="csl-entry" role="listitem">
R Core Team. 2023. <em><span class="nocase">R: A Language and Environment for Statistical Computing</span></em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-bbref" class="csl-entry" role="listitem">
Sports Reference LLC. 2024. Basketball-Reference.com - Basketball Statistics and History. <a href="https://www.basketball-reference.com/">https://www.basketball-reference.com/</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley et al. 2023. <em>The Tidyverse: Easily Install and Load the ’Tidyverse’</em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.
</div>
<div id="ref-dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, and Kirill Müller. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-knitr" class="csl-entry" role="listitem">
Xie, Yihui. 2023. <em>Knitr: A General-Purpose Package for Dynamic Report Generation in r</em>. <a href="https://CRAN.R-project.org/package=knitr">https://CRAN.R-project.org/package=knitr</a>.
</div>
<div id="ref-kableExtra" class="csl-entry" role="listitem">
Zhu, Hao. 2023. <em>kableExtra: Construct Complex Table with ’Kable’ and Pipe Syntax</em>. <a href="https://CRAN.R-project.org/package=kableExtra">https://CRAN.R-project.org/package=kableExtra</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>